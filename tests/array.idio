;;
;; Copyright (c) 2015 Ian Fitchet <idf(at)idio-lang.org>
;;
;; Licensed under the Apache License, Version 2.0 (the "License"); you
;; may not use this file except in compliance with the License.  You
;; may obtain a copy of the License at
;;
;;     http://www.apache.org/licenses/LICENSE-2.0
;;
;; Unless required by applicable law or agreed to in writing, software
;; distributed under the License is distributed on an "AS IS" BASIS,
;; WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
;; See the License for the specific language governing permissions and
;; limitations under the License.
;;
;;

;;
;; array.idio
;;
array0 = Tests

;; array operator tests
a := #[ 1 2 3 ]

test a '#[ 1 2 3 ]

;; push
a =+ 'r
test a '#[ 1 2 3 r ]

;; pop
v := a =-
test v 'r
test a '#[ 1 2 3 ]

;; unshift
a += 'r
test a '#[ r 1 2 3 ]

;; shift
v = a -=
test v 'r
test a '#[ 1 2 3 ]

;; again with an empty array
a = #[]
test a '#[]

;; push
a =+ 'r
test a '#[ r ]

;; pop
v = a =-
test v 'r
test a '#[]

;; unshift
a += 'r
test a '#[ r ]

;; shift
v = a -=
test v 'r
test a '#[]

;; pop/shift of an empty array
v = a =-
test v #n
test a '#[]

v = a -=
test v #n
test a '#[]

;; array indexing
a = #[ 1 #[ 10 20 30 ] 3 ]

;; formatting
test (a.0) 1
test (a . 0) 1
test (a. 0) 1
test (a .0) 1

b := 2
test (a.b) 3
test (a.(1 + 1)) 3

test (a.1) '#[ 10 20 30 ]

;; a.1.1 looks like a . 1.1 so use whitespace or a variable instead of
;; any literal integer followed by a DOT
test (a . 1 . 1) 20
test (a.1 .1) 20

i = 1
test (a.i.i) 20
test (a.i.1) 20
test (a.(0 + 1).(0 + 1)) 20

;; all done?
test (array0 + 30) Tests
