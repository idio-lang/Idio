
display* "This is trap.idio"

;%%vm-dis 1

trap ^rt-signal-SIGCHLD (function (c) {
			   ;display* "trapped ^rt-signal-SIGCHLD" c
			   c
}) {
  trap ^rt-signal-SIGHUP (function (c) {
			    display* "trapped ^rt-signal-SIGHUP" c
  }) {
    echo Hello World
  }
}

;; test out the base-condition-handler

set-default-handler! ^idio-error (function (c) {
				    'default-idio-error
})

test (raise (make-condition ^idio-error "CONT ^idio-error" "loc" "det")) 'default-idio-error

{
  f := (function (s) {
	  edisplay* "s =" s
	  echo s
	  raise (make-condition ^idio-error
				(string-append "^idio-error: " s)
				"loc"
				"det")
  })

  f "default-condition-handler test"
}

clear-default-handler! ^idio-error
